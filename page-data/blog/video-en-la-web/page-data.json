{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/video-en-la-web/","webpackCompilationHash":"4ee8b307865fbeeb9263","result":{"data":{"site":{"siteMetadata":{"title":"PerfReviews","author":"Joan Le√≥n y Jos√© M. P√©rez"}},"markdownRemark":{"id":"d85f5c2c-3320-530a-bfab-a21a442f9b07","excerpt":"Despu√©s de este tweet de Yoav Weiss en el que Addy Osmani le pregunta por la ‚Äúmejor‚Äù imagen de la web.  Rick Viscomi es un ingeniero de Google que actualmente‚Ä¶","html":"<p>Despu√©s de este tweet de <a href=\"https://twitter.com/yoavweiss\">Yoav Weiss</a> en el que <a href=\"https://twitter.com/addyosmani\">Addy Osmani</a> le pregunta por la ‚Äúmejor‚Äù imagen de la web.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1240px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/28cbb92632f50d041418b0179574a14a/7bfa5/Yoav.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 114.51612903225808%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'458\\'%3e%3cpath%20d=\\'M26%2016c-13%206-13%2023-1%2029%2016%207%2030-11%2019-24-4-6-12-7-18-5m-8%2064c-3%204%200%209%204%207%202-2%203-2%204%200%201%201%202%201%204-1s2-3%200-5-2-2-4-1c-2%202-2%202-3%200h-5m85%2061c0%201%200%202-1%201l-2-1-2%201h-1c-1-1-1-1-2%201h-1c0-2-2-3-2-1h-4c-1%201-2%201-2-1l-3-1c-3%200-3%200-3%204%200%203%202%204%205%202h2c2%202%204%201%204-1l1-2%201%202c1%202%203%203%203%200h2c2%202%204%202%204%200h1c0%204%202%202%202-2s-2-6-2-2M28%20394l-2%205c-1%204-1%2012%201%2014%203%201%202%202%200%202l-7%203%204%203c4%203%2011%203%2016%201%204-3%205-4%201-7-4-4-5-6-2-8l1-6c0-4%200-5-3-6-4-2-9-2-9-1\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/28cbb92632f50d041418b0179574a14a/277cf/Yoav.webp 310w,\n/static/28cbb92632f50d041418b0179574a14a/5077d/Yoav.webp 620w,\n/static/28cbb92632f50d041418b0179574a14a/e1adb/Yoav.webp 1240w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/28cbb92632f50d041418b0179574a14a/fa223/Yoav.png 310w,\n/static/28cbb92632f50d041418b0179574a14a/a5ed1/Yoav.png 620w,\n/static/28cbb92632f50d041418b0179574a14a/7bfa5/Yoav.png 1240w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/28cbb92632f50d041418b0179574a14a/7bfa5/Yoav.png\"\n          alt=\"Tweet Yoav &amp; Addy\"\n          title=\"Tweet Yoav &amp; Addy\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Tweet Yoav &amp; Addy</figcaption>\n  </figure></p>\n<p><a href=\"https://twitter.com/rick_viscomi\">Rick Viscomi</a> es un ingeniero de Google que actualmente est√° trabajando en un interesante proyecto llamado ‚ÄúThe State of the Web‚Äù. Para esta iniciativa, Rick est√° ejecutando cientos de consultas con <a href=\"https://cloud.google.com/bigquery/\">BigQuery</a> contra el dataset de <a href=\"https://httparchive.org\">HTTP Archive</a>, y responde a Addy con el siguiente tweet:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1240px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/161f746459bb8584f488b60edda996c1/7bfa5/Rick.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 106.4516129032258%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'426\\'%3e%3cpath%20d=\\'M24%2016c-10%206-10%2020%200%2027%205%203%208%203%2013-2l5-3V17c-1-3-14-4-18-1m7%203c-2%202-3%205-1%205l1%204c-1%204%201%205%203%203%201-2%201-2%203%201%202%202%202%202%203%200%204-7-3-17-9-13M21%20218v8l1%207h25c33%200%2030%201%2030-8v-7l-28-1-28%201m74%2068c0%201-1%202-3%202l-2%201c0%202%2012%202%2012%200l1%201%201%202v-4l1%202h2l12%201h11l1%201%208-1c1%202%206%200%206-2h1c0%202%209%202%2010%200%200-2-5-3-11-2a376%20376%200%2001-31%200l-17-1h-2m166%200l-1%203v2h15c11%200%2014-1%2015-2s1-1%201%201c1%201%201%201%201-1l-1-3h-3c-1-1-1-1-2%201l-1%201c0-2-2-3-2-1h-1c-1-2-2-2-2-1h-2c-2-1-13-1-14%201h-1c0-1-1-2-2-1m-215%203c0%202%200%202%201%201l1-1c0%201%202%202%206%202h5l5-1h5l1-1c0%203%2017%203%2017%200%200-2-4-3-7-2H67c-4-1-4-1-5%201l-1%202-1-2c1-1%200-1-2-1h-7c-5-1-5-1-5%202m152-1c0%202%201%202%204%203l3-1h1c3%201%2011%201%2012-1h1c0%201%201%202%204%202h5c1%202%206%200%206-2h1c0%202%204%203%204%201h1c1%201%201%201%201-1h1c0%204%2013%203%2014%200%201-2%201-2%202%200l1%203v-3c0-2%200-3-2-3l-2%201h-6a332%20332%200%2000-45%200h-4c-2-1-2-1-2%201m42%20113c-2%202%201%208%204%209%203%200%207-4%207-8%200-2-1-3-5-3l-6%202\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/161f746459bb8584f488b60edda996c1/277cf/Rick.webp 310w,\n/static/161f746459bb8584f488b60edda996c1/5077d/Rick.webp 620w,\n/static/161f746459bb8584f488b60edda996c1/e1adb/Rick.webp 1240w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/161f746459bb8584f488b60edda996c1/fa223/Rick.png 310w,\n/static/161f746459bb8584f488b60edda996c1/a5ed1/Rick.png 620w,\n/static/161f746459bb8584f488b60edda996c1/7bfa5/Rick.png 1240w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/161f746459bb8584f488b60edda996c1/7bfa5/Rick.png\"\n          alt=\"Tweet Rick\"\n          title=\"Tweet Rick\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Tweet Rick</figcaption>\n  </figure></p>\n<p>Rick muestra la consulta SQL que ha hecho a la tabla de la base de datos con los datos de HTTP Archive del mes de julio.</p>\n<p>La ‚Äúmejor‚Äù imagen de la web actualmente es un archivo en formato GIF, video.gif. Como su nombre indica, se trata de un v√≠deo de 11 segundos y con un tama√±o de m√°s de <strong>65Mb</strong>.</p>\n<p>S√≠, nos pudo la curiosidad üòä</p>\n<p>As√≠ que empezamos a hacer eso que tanto nos gusta hacer, investigar para conseguir encontrar el problema y su posible soluci√≥n.</p>\n<h2 id=\"problema\">Problema</h2>\n<p>Al ver la url de la imagen, lo primero que podemos ver es que se trata de un <a href=\"https://moodle.org\">Moodle</a>, una plataforma de aprendizaje en l√≠nea utilizada por muchas escuelas de todo el mundo.</p>\n<p>Al entrar en la direcci√≥n <a href=\"https://moodle.e-formalia.es\">moodle.e-formalia.es</a> nos encontramos con una p√°gina de acceso a la plataforma, y ah√≠ es donde encontramos el tan pesado GIF.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1240px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a0242c50970cf62c34468bd6dea54a4/140d6/home.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.2814371257485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'237\\'%3e%3cpath%20d=\\'M143%201c-2%203-2%204%200%207l2%2011%201%209%2037%207c7%201%208%202%203%207-6%206-7%2011-3%2018l3%209c3%2013%205%2017%2011%2020l6%204-4%206c-2-1-2-1%200-4%200-2-1-2-2%201-4%203-4%204%200%204%204%201%204%203-2%207l-4%205h4l11-1%2014-1h15c1-2%2011-5%2013-5l-2%202c-2%203-4%2012-3%2013l1-2%201-4c2-3%202-3%203-1l2%201-1-2c-1-2%200-2%202-2%203-1%204%200%204%201l1%203%201-2c0-3%200-3%207-2l9%201c4%201%2011%202%2015%201%202-1%203%200%203%201l2%202c2%200%203-3%201-3-1-1%200-1%201-1l2%201h1c0-1%202%200%205%204l5%204-4-5c-4-4-4-5-3-6l1-1%202-2c3-2%203-2%201-2l-3-1c0-1%209-1%2012%201h-2l-4%201%203%201%202%201h3c1-1%203-2%204-1%204%201%204-1-1-3h2l5-1%203-1c3%200%203%200%202%201v2c1%200%204-3%202-3l5-2%202%202c1%201%200%201-2%201h-3c0%201%205%202%207%201l1-2h1l1-1h2l3%202%2041-5h9V63a1660%201660%200%20010-47c0%206-1%208-2%208-1-1-3%200-4%201s-2%202-3%201l-2%201-2%201-2%202-1%201c-1-1-7%201-7%202l-2%202-3%201-3%201-6%203-1%201h-3c-1%202-8%203-8%202h-1c0%203-3%204-10%205-5%200-7-1-8-2h-13l-3-1-4-1-8-1c0-2-1-2-4-2a86%2086%200%2001-9-1l-2-2h-1l-2%201-9-3c0-2-4-1-8%201-3%202-4%202-6%201h-2v3h-2c1%202-7%205-11%206l-5%201c-2%202-14%202-19-1l-7-2-2-2c0-2%204-4%2016-10%204-2%206-4%207-6l7-13c7-14%208-17%200-5-6%2010-8%209-2-2l4-7h-7c-9%201-9%201-13%204l-7%202-5%203-5%203-4%202h-4l-11-2h-4l-5%201c-3%201-3-1-1-3l11-5%2010-5-59%201m121%201l-3%201c-2%200-7%204-9%208l-6%209c-10%2010-7%2011%207%203l10-5c8-2%2018-8%2014-8l-2%201c-2%202-4%201-4-1%201-2%201-2-2-2h-4c-1%201-1%201-1-1%203-5%203-7%202-7l-2%202M146%20130H0v107h401V130H146M0%20184\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/7a0242c50970cf62c34468bd6dea54a4/277cf/home.webp 310w,\n/static/7a0242c50970cf62c34468bd6dea54a4/5077d/home.webp 620w,\n/static/7a0242c50970cf62c34468bd6dea54a4/e1adb/home.webp 1240w,\n/static/7a0242c50970cf62c34468bd6dea54a4/92eb6/home.webp 1860w,\n/static/7a0242c50970cf62c34468bd6dea54a4/d232f/home.webp 2480w,\n/static/7a0242c50970cf62c34468bd6dea54a4/8d80f/home.webp 3340w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/7a0242c50970cf62c34468bd6dea54a4/fa223/home.png 310w,\n/static/7a0242c50970cf62c34468bd6dea54a4/a5ed1/home.png 620w,\n/static/7a0242c50970cf62c34468bd6dea54a4/7bfa5/home.png 1240w,\n/static/7a0242c50970cf62c34468bd6dea54a4/b429f/home.png 1860w,\n/static/7a0242c50970cf62c34468bd6dea54a4/d03be/home.png 2480w,\n/static/7a0242c50970cf62c34468bd6dea54a4/140d6/home.png 3340w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/7a0242c50970cf62c34468bd6dea54a4/7bfa5/home.png\"\n          alt=\"Home e-Formalia\"\n          title=\"Home e-Formalia\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Home e-Formalia</figcaption>\n  </figure></p>\n<p>El servidor nos est√° sirviendo dos im√°genes: logos.png y video.gif. El tiempo de carga de ese v√≠deo de fondo en la pantalla de acceso, desde una conexi√≥n de fibra √≥ptica de <strong>600Mb</strong> es de tan s√≥lo <strong>2.67 segundos</strong>.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1240px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3386e8063e1887c0285f0edef7b5ec66/a987b/network-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.958333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'196\\'%3e%3cpath%20d=\\'M96%2043a256%20256%200%20001%2016l1-9%2014%201c10%201%2013%200%2015-1s0-1-13-1l-17-1a6329%206329%200%2001109-1%201314%201314%200%2001-96-4H96m-75%201h20v5h23c22%200%2022-1%2022-2l-1-3a936%20936%200%2000-64%200m376%2088v54l1-53a872%20872%200%2000-1-1M1%20106v10h316V95H1v11m1%200v8h314V97H2v9m230%2084a494%20494%200%200147%200h-16l-8-1h-8l-2-1-3%201h-3l-2%201c1-1%200-2-2-2-3%200-3%200-3%202\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/3386e8063e1887c0285f0edef7b5ec66/277cf/network-1.webp 310w,\n/static/3386e8063e1887c0285f0edef7b5ec66/5077d/network-1.webp 620w,\n/static/3386e8063e1887c0285f0edef7b5ec66/e1adb/network-1.webp 1240w,\n/static/3386e8063e1887c0285f0edef7b5ec66/92eb6/network-1.webp 1860w,\n/static/3386e8063e1887c0285f0edef7b5ec66/34ef4/network-1.webp 1920w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/3386e8063e1887c0285f0edef7b5ec66/fa223/network-1.png 310w,\n/static/3386e8063e1887c0285f0edef7b5ec66/a5ed1/network-1.png 620w,\n/static/3386e8063e1887c0285f0edef7b5ec66/7bfa5/network-1.png 1240w,\n/static/3386e8063e1887c0285f0edef7b5ec66/b429f/network-1.png 1860w,\n/static/3386e8063e1887c0285f0edef7b5ec66/a987b/network-1.png 1920w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/3386e8063e1887c0285f0edef7b5ec66/7bfa5/network-1.png\"\n          alt=\"Developer Tools: Network Panel\"\n          title=\"Developer Tools: Network Panel\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Developer Tools: Network Panel</figcaption>\n  </figure></p>\n<p>Pero veamos qu√© pasa si utilizamos la funcionalidad del panel de red de las Developer Tools para simular una conexi√≥n m√°s lenta. Seleccionamos la configuraci√≥n de 3G r√°pida, que se acerca m√°s a la experiencia de carga en m√≥vil.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1240px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ae44d5483768a8b0262bf4e9680b1069/a987b/network-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.958333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'196\\'%3e%3cpath%20d=\\'M4%2054c0%2011%200%2012%201%206%200-6%201-7%202-7%203%200%202-2%200-3-1-1%2076-1%20173-1h175v19l1-7V47c0-5-1-6-1-3v4H181A6270%206270%200%20016%2045v-1l-1-2c-1-1-1%205-1%2012m-3%2051v9h314l1-9v-9H1v9m2-1v5h5l4-1-4-1c-4%200-4%200-4-3%200-2%200-2%204-2h4c1-1%201%201%201%204v5H8l-5%201%20156%201h156V98H3v6m232%2086a504%20504%200%200147%200h-16l-7-1-8%201-2%201c-2%200-2%200-1-1%201-2%201-2-1-2l-2%201h-4l-1%202v-1c2-3%200-2-3%200h-1v-2l-1%202\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/ae44d5483768a8b0262bf4e9680b1069/277cf/network-2.webp 310w,\n/static/ae44d5483768a8b0262bf4e9680b1069/5077d/network-2.webp 620w,\n/static/ae44d5483768a8b0262bf4e9680b1069/e1adb/network-2.webp 1240w,\n/static/ae44d5483768a8b0262bf4e9680b1069/92eb6/network-2.webp 1860w,\n/static/ae44d5483768a8b0262bf4e9680b1069/34ef4/network-2.webp 1920w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/ae44d5483768a8b0262bf4e9680b1069/fa223/network-2.png 310w,\n/static/ae44d5483768a8b0262bf4e9680b1069/a5ed1/network-2.png 620w,\n/static/ae44d5483768a8b0262bf4e9680b1069/7bfa5/network-2.png 1240w,\n/static/ae44d5483768a8b0262bf4e9680b1069/b429f/network-2.png 1860w,\n/static/ae44d5483768a8b0262bf4e9680b1069/a987b/network-2.png 1920w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/ae44d5483768a8b0262bf4e9680b1069/7bfa5/network-2.png\"\n          alt=\"Developer Tools: Network Panel\"\n          title=\"Developer Tools: Network Panel\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Developer Tools: Network Panel</figcaption>\n  </figure></p>\n<p>Hemos tenido que esperar <strong>6.1 minutos</strong> para que se descargara el 100% del v√≠deo.</p>\n<h2 id=\"solucion\">Soluci√≥n</h2>\n<p>No es una novedad que el mejor formato para cargar un v√≠deo en la web es un fichero de v√≠deo como <strong>MP4</strong>, en lugar de una imagen con soporte de animaci√≥n como el formato GIF.</p>\n<p>Hay otros formatos de imagen con soporte de animaci√≥n, como <strong>WebM</strong>. Tambi√©n existe el formato <strong>APNG</strong>. Este formato, que no es nuevo pero es muy desconocido, es una versi√≥n de PNG con soporte para animaciones. Recientemente lo compart√≠a Joan en <a href=\"https://twitter.com/nucliweb/status/1163537269007032320\">este tweet</a>.</p>\n<p>Para aprender sobre el uso de utilizar V√≠deo en lugar de GIF, podemos hacer uso de una de las base de documentaci√≥n de buenas pr√°cticas, optimizaci√≥n y rendimiento web que tenemos disponible, <strong>Web Fundamentals</strong>. En este sitio web encontraremos un art√≠culo espec√≠fico sobre este tema <a href=\"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/\">Replace Animated GIFs with Video</a>.</p>\n<p>En el art√≠culo nos sugieren una herramienta de compresi√≥n de v√≠deo, <a href=\"https://ffmpeg.org\">FFmpeg</a>. Se trata de una herramienta muy potente y vers√°til, con much√≠simas funcionalidades, plugins y configuraciones posibles. Pero vamos a hacerlo f√°cil, centr√°ndonos en las sugerencias que nos hace Google en art√≠culo mencionado.</p>\n<h3 id=\"mpeg-4\">MPEG-4</h3>\n<p>Despu√©s de la instalaci√≥n, en nuestro caso algo tan simple como <code class=\"language-text\">brew install ffmpeg</code> en Mac, ejecutamos <code class=\"language-text\">ffmpeg -i video.gif video.mp4</code> y despu√©s de unos pocos segundos podemos ver que el archivo <strong>video.gif</strong> de <strong>65Mb</strong> se ha convertido en <strong>video.mp4</strong> de tan s√≥lo 6.6MB. En el art√≠culo nos muestran algunos par√°metros de FFmpeg que nos dan opci√≥n de optimizar la conversi√≥n desde el punto de vista de peso y de calidad.</p>\n<p>Podemos ajustar el par√°metro <a href=\"https://trac.ffmpeg.org/wiki/Encode/H.264\">CRF</a> que nos permite definir el nivel de p√©rdida de calidad. Tras algunas pruebas, optamos por definir el CRT a 22, un punto por debajo del valor por defecto, con la intenci√≥n de ser lo m√°s fieles posibles a la calidad que nos hemos encontrado con el fichero original.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">ffmpeg -i video.gif -b:v 0 -crf 22 video.mp4</code></pre></div>\n<p>Esto nos deja un archivo de <strong>8.5Mb</strong>, reduciendo su peso a un 13% del original.</p>\n<h3 id=\"webm\">WebM</h3>\n<p>Otro formato de v√≠deo es <strong>WebM</strong>, la versi√≥n para v√≠deos de <strong>WebP</strong>, el formato de imagen con p√©rdida sugerido por Google. El formato WebM tiene un gran soporte por los navegadores, como podemos ver en <a href=\"https://caniuse.com/#search=webm\">Can I Use</a>.</p>\n<p>Despu√©s de hacer algunas pruebas ajustando  el valor de CRF, lo establecemos al valor sugerido por Google, 41:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">ffmpeg -i video.gif -c vp9 -b:v 0 -crf 41 video.webm</code></pre></div>\n<p>Sorprendentemente obtenemos un v√≠deo de una calidad muy aceptable con un tama√±o de s√≥lo <strong>2.4Mb</strong>.</p>\n<h3 id=\"video\">&#x3C;video></h3>\n<p>A la hora de implementar estos formatos, y para dar soporte a todos los navegadores, a√±adiremos m√∫ltiples sources a una etiqueta v√≠deo:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">loop</span> <span class=\"token attr-name\">muted</span> <span class=\"token attr-name\">playsinline</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>video.webm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>video/webm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>video.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Esto permite servir el archivo <strong>video.webm</strong> para los navegadores que soporten WebM y <strong>video.mp4</strong> para el resto.</p>\n<h2 id=\"resultado\">Resultado</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1240px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b529192a33f442b3dfecfa84c22f3d0/fb323/terminal-files.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.168539325842694%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'141\\'%3e%3cpath%20d=\\'M0%201v71l1%2069h198l201-1%201-71a880%20880%200%2000-2-68C399-1%201-1%200%201m133%2096v4l-1%201-1%201%207%201%207-1h12c0%202%203%201%203-1h1l1%202v-3l1-1%201%202c0%202%200%202%201%201%200-1%201-2%203-1l2-1-2-1-4-1h-24v-2c0-1-4%202-4%204%200%203-2%201-2-2s-1-3-1-2m39%202v4h8l3-1%203%201h5l6%201c4%200%205%200%206-4l1-3-2%203c-2%203-2%203-2%201s-4-6-5-4c0%201-1%202-3%201l-3%201h-9c-2-2-4-1-4%201-1%203-3%202-3-1l-1-3v3m54-1h-3l-3%201-1%202v-1l-1-2-3%202-1%201v-1c0-1-1-2-4-2s-4%201-4%202v2c0%201%201%202%204%202l4-1h7c1%201%204%201%204-1v-1l1%201c1%203%203%202%203-1-1-3-2-5-3-3\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/6b529192a33f442b3dfecfa84c22f3d0/277cf/terminal-files.webp 310w,\n/static/6b529192a33f442b3dfecfa84c22f3d0/5077d/terminal-files.webp 620w,\n/static/6b529192a33f442b3dfecfa84c22f3d0/e1adb/terminal-files.webp 1240w,\n/static/6b529192a33f442b3dfecfa84c22f3d0/b9128/terminal-files.webp 1780w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/6b529192a33f442b3dfecfa84c22f3d0/fa223/terminal-files.png 310w,\n/static/6b529192a33f442b3dfecfa84c22f3d0/a5ed1/terminal-files.png 620w,\n/static/6b529192a33f442b3dfecfa84c22f3d0/7bfa5/terminal-files.png 1240w,\n/static/6b529192a33f442b3dfecfa84c22f3d0/fb323/terminal-files.png 1780w\"\n          sizes=\"(max-width: 1240px) 100vw, 1240px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/6b529192a33f442b3dfecfa84c22f3d0/7bfa5/terminal-files.png\"\n          alt=\"terminal files\"\n          title=\"terminal files\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Os dejamos enlace a los ficheros para que pod√°is evaluar los resultados de calidad, as√≠ como sus tama√±os.</p>\n<ul>\n<li><a href=\"/a3c782d22c253fe59a1b92aa63fe0726/video.gif\">video.gif (65Mb)</a></li>\n<li><a href=\"/6b45cc354d7ae59ecd006f8708b802ba/video.mp4\">video.mp4 (8,5Mb)</a></li>\n<li><a href=\"/f6a8d6e3a8f2d1964382adfb966a1826/video.webm\">video.webm (2,4Mb)</a></li>\n</ul>\n<h2 id=\"conclusion\">Conclusi√≥n</h2>\n<p>Hemos visto c√≥mo podemos mejorar el rendimiento de esta p√°gina con unos simples pasos. Pero lo que realmente deber√≠amos valorar es el impacto en la experiencia de usuario, dado que este v√≠deo se muestra en la p√°gina de login, una funcionalidad cr√≠tica.</p>\n<p>En el caso de que un usuario acceda desde m√≥vil, podr√≠amos presentar una imagen en lugar de un v√≠deo, ya que en la mayor√≠a de casos estar√° navegado en una red de datos.</p>\n<p>Somos conscientes de que m√°s del 90% de usuarios acceder√°n a la siguiente pantalla antes de que haya descargado el 100% del GIF, pero hemos de ser responsables con el consumo de datos de los usuarios cuando acceden a nuestras webs o aplicaciones.</p>","frontmatter":{"title":"El formato v√≠deo en la web","date":"August 26, 2019","description":"Despu√©s de encontrarnos con la imagen m√°s pesada de la web (seg√∫n HTTP Archive), no hemos resistido la tentaci√≥n de analizar el caso y encontrar una soluci√≥n para mejorar el rendimiento.","featuredImage":{"childImageSharp":{"fluid":{"aspectRatio":1,"src":"/static/785076bd1a8e6bcc85b2f2fffef9ac88/e9c7b/featured-image.png","srcSet":"/static/785076bd1a8e6bcc85b2f2fffef9ac88/69781/featured-image.png 250w,\n/static/785076bd1a8e6bcc85b2f2fffef9ac88/3fa08/featured-image.png 500w,\n/static/785076bd1a8e6bcc85b2f2fffef9ac88/e9c7b/featured-image.png 1000w,\n/static/785076bd1a8e6bcc85b2f2fffef9ac88/a4fe2/featured-image.png 1500w,\n/static/785076bd1a8e6bcc85b2f2fffef9ac88/dc9f7/featured-image.png 2000w,\n/static/785076bd1a8e6bcc85b2f2fffef9ac88/c81f1/featured-image.png 2134w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/video-en-la-web/","previous":{"fields":{"slug":"/blog/mantenerse-al-dia/en/"},"frontmatter":{"title":"How to keep up to date on web performance"}},"next":{"fields":{"slug":"/blog/video-en-la-web/en/"},"frontmatter":{"title":"The video format on the web"}}}}}